//PSREX Modules
Table PSREX_NODES as M {
  id int [pk, increment] // auto-increment
  name varchar(255)
  description varchar(255)
  full_name varchar
  type node_type
  git_repo_url varchar(255)
}

Enum node_type {
  Database
  RabbitMQ
  dotNET
  JavaEE
  SpringBoot
  Micronaut
}

Table PSREX_EDGES_relations as R {
  id int [pk, increment]
  full_name varchar
  left_node_id int
  right_node_id int
  flow_id int
  connection_type connection_type_enum
  destination_url varchar(255) // endpoint or queue
  endpoint_called_verb varchar(255) // relevant when destination_url is REST endpoint 
  call_description varchar(255)
}

Enum connection_type_enum{
  RESTCall
  FTPCall
  QueuePush
  QueuePull
  DatabaseInsert
  DatabaseSelect
}

Table PSREX_FLOWS as F {
  id int [pk, increment]
  name varchar(255)
  type flow_type_enum
  description varchar(1255)
}

// Client calls: calls from client modules
// Integrations: calls from outside system
// Jobs: triggered from inside the system from one point
Enum flow_type_enum{
  ClinetCall
  Integration
  Job
}

Table PSREX_CONTAINERS as C {
  id int [pk, increment]
  image_name varchar(255)
  server am_server_enum
  module_node_id int
  fix_version_id int
  description varchar(1255)
}

Enum am_server_enum{
  am1
  am2
  am3
}

Ref: R.left_node_id > PSREX_NODES.id
Ref: R.right_node_id > PSREX_NODES.id  
Ref: R.flow_id > PSREX_FLOWS.id  
Ref: C.module_node_id > PSREX_NODES.id