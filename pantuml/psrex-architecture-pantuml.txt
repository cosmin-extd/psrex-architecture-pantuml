@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml
' uncomment the following line and comment the first to use locally
' !include C4_Component.puml
!include <tupadr3/common>
!include <tupadr3/devicons/mysql>
!include <C4/C4_Container>
!include <logos/rabbitmq>

LAYOUT_WITH_LEGEND()

title Component Diagram for PSO
Person(individual2, "Pharmacy employee", "Pharmaceut or technician.")
Component(asab, "ASAB", "Java internal Gradle dependency", "ASAB JAR.")
Component(pharmaEhmFhirClient, "pharma-schemas-ehm", "Java internal Gradle dependency", "pharma-schemas-ehm PharmaEhmFhirClient project for NLL.")

Container_Boundary(app2, "Pharma Suite") {
   Component(dotnetclient, ".NET Client", "C#", ".NET Client")
   Container_Boundary(psrexarticles-container, "PSREX Articles") {
      Component(psrexarticles, "PSREX Articles Import", "Java module", "Stores article information.")
      Component(articlesearch, "PSREX Articles Search", "Java module", "Stores article information.")
   }
   Component(vara, "VARA Connect", "Part of PSREX Server Java module", "VARA Connect.")
   Component(psrexarchive, "PSREX Archive", "Spring Boot module", "Archives expeditions & orders.")
   Component(psrexreservations, "PSREX Reservations", "Spring Boot module", "Manages reservations orders, customer orders & booking requests.")
   Component(psrexstores, "PSREX Stores", "Spring Boot module", "Manages stores information.")
   Component(psrexauth, "PSREX Auth", "Spring Boot module", "Manages users.")
   Component(psrexserver, "PSREX Server", "JavaEE/Wildfly module", "Manages expeditions of prescriptions, dose production and orders from eCommerce (PhOMS).")

}

Container_Boundary(app, "PSO Components") {
   Component(pso, "PSO", "Java", "PSO")
   Component(rclCPP, "Web UI", "Java", "Web UI.")
   Component(psoImportAPI, "Import API", "Java", "Import API.")

}

Rel(pso, asab, "Uses","Gradle dependency")
Rel(psrexserver, asab, "Uses","Gradle dependency")
Rel(psrexserver, pharmaEhmFhirClient, "Uses","Gradle dependency")
Rel(psrexserver, psrexreservations, "REST","-")
Rel(psrexserver, psrexstores, "REST","-")
Rel(psrexserver, psrexarchive, "REST","-")
Rel(psrexarticles, psrexauth, "REST","-")
Rel(psrexauth, psrexstores, "REST","-")
Rel(psrexserver, psrexauth, "REST","-")

'(C.2)Others
Rel(dotnetclient, articlesearch, "Uses","SOAP API")
Rel(individual2, dotnetclient, "Uses","UI Client")



@enduml